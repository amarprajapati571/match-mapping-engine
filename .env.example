# ═══════════════════════════════════════════════════════════
# AI Match Mapping Engine — Environment Variables
# ═══════════════════════════════════════════════════════════
# Copy this to .env and edit as needed:
#   cp .env.example .env
#
# Load in your shell:
#   export $(grep -v '^#' .env | xargs)
# Or use python-dotenv (auto-loaded by the app).

# ── External API URLs ─────────────────────────────────────
MATCHES_API_BASE_URL=https://sports-bet-api.allinsports.online/api/matches
STORE_RESULTS_URL=https://sports-bet-api.allinsports.online/api/matches/store-ai-mapping

# ── League & Team Aliases ────────────────────────────────
# Loaded at server startup to auto-build alias maps for abbreviation resolution.
#
# Option A: Load from LOCAL JSON files (no API needed)
#   Set the file paths below. Relative paths resolve from project root.
#   JSON format: array of objects or {"leagues": [...]} / {"teams": [...]}
#   See data/leagues.sample.json and data/teams.sample.json for examples.
# LEAGUES_JSON_FILE=data/leagues.json
# TEAMS_JSON_FILE=data/teams.json
#
# Option B: Load from EXTERNAL API (fallback if no JSON file)
#   Set the URLs and auth tokens below.
LEAGUES_API_URL=https://sports-bet-api.allinsports.online/api/leagues
LEAGUES_API_TOKEN=your_auth_token_here
TEAMS_API_URL=https://sports-bet-api.allinsports.online/api/teams
TEAMS_API_TOKEN=your_auth_token_here
#
# Priority: JSON file → API → static aliases (hardcoded fallback)

# ── Providers (comma-separated, add/remove as needed) ────
# Available: ODDSPORTAL, FLASHSCORE, SOFASCORE, SBO
ENABLED_PROVIDERS=ODDSPORTAL

# ── Output Control ────────────────────────────────────────
SAVE_OUTPUT_TO_FILE=true              # Save results to data/ai_suggested_mappings.json
PUSH_RESULTS_TO_API=false             # Push each result one-by-one to STORE_RESULTS_URL
CONFIDENCE_THRESHOLD=0.90             # Minimum confidence to include in output
PUSH_WORKERS=10                       # Number of parallel threads for API push

# ── CSE Feedback API (for training — runs separately) ────
FEEDBACK_API_PROD_URL=https://sports-bet-api.allinsports.online/api/matches/get-ai-mapping-feedback-v2
FEEDBACK_API_LOCAL_URL=http://localhost:8010/api/matches/get-ai-mapping-feedback-v2
FEEDBACK_API_USE_LOCAL=false
FEEDBACK_API_PLATFORM=ODDSPORTAL
FEEDBACK_API_TIMEOUT=60
FEEDBACK_API_MAX_RETRIES=3
MIN_FEEDBACK_FOR_TRAINING=50
AUTO_RELOAD_AFTER_TRAINING=true

# ── Scheduler (fetch + inference only, NO training) ──────
SCHEDULER_INTERVAL_MINUTES=45
SCHEDULER_PLATFORM=ODDSPORTAL
SCHEDULER_ENABLE_INFERENCE=true
SCHEDULER_MAX_RETRIES=2

# ── FastAPI Server ────────────────────────────────────────
API_HOST=0.0.0.0
API_PORT=8000

# ── Database (optional) ──────────────────────────────────
MONGO_URI=mongodb://localhost:27017
MONGO_DB=match_mapping

# ── Model Paths (optional, set after training) ───────────
# TUNED_SBERT_PATH=models/sbert_tuned_20260220
# TUNED_CROSS_ENCODER_PATH=models/ce_tuned_20260220
